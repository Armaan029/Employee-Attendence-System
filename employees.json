// Permanent Storage

import json
from datetime import datetime
import os

EMPLOYEE_FILE = "employees.json"
ATTENDANCE_FILE = "attendance.json"

// Helper Functions for File Handling
def load_data(filename):
    """Load JSON data from file or return empty dict if file not found."""
    if os.path.exists(filename):
        with open(filename, "r") as file:
            return json.load(file)
    return {}

def save_data(filename, data):
    """Save dictionary as JSON to file."""
    with open(filename, "w") as file:
        json.dump(data, file, indent=4)

// Load Existing Data
employees = load_data(EMPLOYEE_FILE)
attendance = load_data(ATTENDANCE_FILE)

// Attendance System Functions
def check_in():
    emp_id = input("Enter Employee ID: ")
    if emp_id in employees:
        check_in_time = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        attendance[emp_id] = {
            "check_in": check_in_time,
            "check_out": None
        }
        save_data(ATTENDANCE_FILE, attendance)
        emp = employees[emp_id]
        print("\n--- Employee Checked In ---")
        print(f"ID       : {emp_id}")
        print(f"Name     : {emp['name']}")
        print(f"Job      : {emp['profession']}")
        print(f"Salary   : {emp['salary']}")
        print(f"Check-In : {check_in_time}")
        print("---------------------------\n")
    else:
        print("Employee not found!\n")

def check_out():
    emp_id = input("Enter Employee ID: ")
    if emp_id in attendance and attendance[emp_id]["check_in"] is not None:
        check_out_time = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        attendance[emp_id]["check_out"] = check_out_time
        save_data(ATTENDANCE_FILE, attendance)
        emp = employees[emp_id]
        print("\n--- Employee Checked Out ---")
        print(f"ID        : {emp_id}")
        print(f"Name      : {emp['name']}")
        print(f"Check-In  : {attendance[emp_id]['check_in']}")
        print(f"Check-Out : {check_out_time}")
        print("-----------------------------\n")
    else:
        print("No check-in record found for this employee.\n")

def add_employee():
    emp_id = input("Enter New Employee ID: ")
    if emp_id in employees:
        print("Employee ID already exists!\n")
        return
    name = input("Enter Employee Name: ")
    profession = input("Enter Profession: ")
    salary = input("Enter Salary: ")
    try:
        salary = float(salary)
    except ValueError:
        print("Invalid salary format! Please enter a number.\n")
        return
    employees[emp_id] = {
        "name": name,
        "profession": profession,
        "salary": salary
    }
    save_data(EMPLOYEE_FILE, employees)  # Save to file
    print(f"Employee {name} added successfully!\n")

def remove_employee():
    emp_id = input("Enter Employee ID to remove: ")
    if emp_id in employees:
        removed_name = employees[emp_id]['name']
        del employees[emp_id]
        attendance.pop(emp_id, None)  # Remove from attendance if exists
        save_data(EMPLOYEE_FILE, employees)  # Save to file
        save_data(ATTENDANCE_FILE, attendance)  # Save to file
        print(f"Employee {removed_name} removed successfully!\n")
    else:
        print("Employee not found!\n")

// Main Menu
while True:
    print("====== Employee Attendance System ======")
    print("1. Check In")
    print("2. Check Out")
    print("3. Add Employee")
    print("4. Remove Employee")
    print("5. Exit")
    
    choice = input("Enter your choice: ")
    
    if choice == "1":
        check_in()
    elif choice == "2":
        check_out()
    elif choice == "3":
        add_employee()
    elif choice == "4":
        remove_employee()
    elif choice == "5":
        print("Exiting system... Goodbye!")
        break
    else:
        print("Invalid choice! Please try again.\n")
